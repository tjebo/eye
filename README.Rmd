---
output:
  md_document:
    variant: gfm
bibliography: eye.bib
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "README-"
)
library(eye)
```

# eye

This package will help you work with eye data. 

# Features
## Only about the eye
### [Easy count of patients and eyes](#count-patients-and-eyes)
### [Conversion of visual acuity notations](#va-conversion)

## Beyond the eye
### Stats functions
- [Show common summary statistics](#basic-statistics)
- [Calculate 2d probability contours for the use in ggplot2](#probability-contours)

### Convenience functions: 
- Save your data frame as csv 
- Calculate age
- Anonymize your data frame

### ggplot2 extensions 
- [geom_trail: A base plot type = "b" equivalent for ggplot2](#geom_trail)

## AMD data 
Data from a large cohort of patients with age-related macular degeneration from Moorfields Eye Hospital. Data available [on a public repository](https://datadryad.org/stash/dataset/doi:10.5061/dryad.97r9289). In order to reference this data in your publication, please kindly cite the corresponding article.[@fasler] 

# Examples
## Eye stuff
### Count patients and eyes
```{r eyes, warning=FALSE, message=FALSE, results='hide'}

```

### VA conversion
```{r va, warning=FALSE, message=FALSE, results='hide'}

```

## Beyond eye stuff
### Common statistics
```{r stats, warning=FALSE, message=FALSE}
x = y = z = c(rnorm(20), NA)
# named or unnamed list
mylist <- list(x = x, y = y, z = z)
# with a data frame
mydf <- data.frame(x, y, z)

show_stats(mylist)
show_stats(mydf)

# For an aggregation by group, split the data frame first
mydf2 <- data.frame(group = rep(letters[1:2], each = 42), x, y, z)
lapply(split(mydf2, mydf2$group), show_stats, rownames = FALSE)
```

### Probability contours
```{r prob, warning=FALSE, message=FALSE, results='hide'}
library(ggplot2)

set.seed(1)
n=100
foo <- data.frame(x=rnorm(n, 0, 1), y=rnorm(n, 0, 1))

df_contours <- dplyr::bind_rows(
  purrr::map(seq(0.2, 0.8, 0.2), function(p) prob_contour(foo, prob = p))
)

ggplot() +
  geom_point(data = foo, aes(x = x, y = y)) +
  geom_polygon(data = df_contours, aes(x = x, y = y, color = prob), fill = NA) +
  scale_color_brewer(name = "Probs", palette = "Set1")
```

## ggplot2 extensions
### geom_trail
A base plot type = "b" equivalent for ggplot. Works also with text!
```{r trail}
library(ggplot2)

ggplot(pressure, aes(temperature, pressure)) +
  geom_ribbon(aes(ymin = pressure - 50, ymax = pressure + 50), alpha = 0.2) +
  geom_trail()
```

### Calculate age
```{r age, warning=FALSE, message=FALSE}

```

### Anonymize your data 
```{r anonymize, warning=FALSE, message=FALSE}

```

### Export your data to csv 
```{r csv, warning=FALSE, message=FALSE}

```

# Installation 
```{r, eval=FALSE}
# for the development version 
devtools::install_github("tjebo/eye")
```

# References


