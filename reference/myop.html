<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Myopic eye data — myop • eye</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Myopic eye data — myop"><meta name="description" content='Pivot "eye" variable to one column'><meta property="og:description" content='Pivot "eye" variable to one column'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">eye</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/eye.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="nav-link" href="https://github.com/tjebo/eye/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Myopic eye data</h1>
      <small class="dont-index">Source: <a href="https://github.com/tjebo/eye/blob/master/R/myop.R"><code>R/myop.R</code></a></small>
      <div class="d-none name"><code>myop.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Pivot "eye" variable to one column</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">myop</span><span class="op">(</span><span class="va">x</span>, var <span class="op">=</span> <span class="st">"value"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">myopic</span><span class="op">(</span><span class="va">x</span>, var <span class="op">=</span> <span class="st">"value"</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>data frame</p></dd>


<dt id="arg-var">var<a class="anchor" aria-label="anchor" href="#arg-var"></a></dt>
<dd><p>Character vector of length 1 specifying the variable if there
is only one column per eye with no further info on the variable
(default "value")</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A tibble, see also <a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble::tibble</a></p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Out of convenience, data is often entered in a very "wide" format:
there will be two columns for the same variable, one column for each eye.
myop will pivot the eye variable to one column and keep all other
variables wide. E.g., eight columns that store data of four variables for two eyes
will be pivoted to 5 columns (one eye and four further variable columns,
see also <em>examples</em>).</p>
<p><strong>myop requires a specific data format</strong></p>
<p>If there is a column called "eye" or "eyes", myop will not make
any changes - because the data is then already assumed to be in long
format. If you <em>also</em> have columns with eye-specific values,
then you have messy data. Maybe, you could remove or rename the "eye"
column and then let myop do the work.</p>
<p>myop will only recognize meaningful coding for eyes:</p><ul><li><p>Right eyes: <em>"r", "re", "od", "right"</em></p></li>
<li><p>Left eyes:  <em>"l", "le", "os", "left"</em></p></li>
<li><p>for other codes see also <a href="eye_codes.html">eye_codes</a>
The strings for eyes need to be <strong>separated by period or underscores</strong>.
(Periods will be replaced by underscores). Any order is allowed.</p></li>
<li><p><strong>Will work</strong>: "va_r", "right_morningpressure", "night_iop.le", "gat_os_postop"</p></li>
<li><p><strong>Will fail</strong>: "VAr", "rightmorningPressure", "night_IOPle", "gatOSpostop"</p></li>
</ul><p>An exception is when there is only one column for each eye. Then
the column names can consist of eye strings (see above) only.
In this case, <em>var</em> will be used to "name" the resulting variable.</p>
<p>If there are only eye columns in your data (should actually not happen),
myop will create identifiers by row position.</p>
<p><strong>Please always check the result for plausibility.</strong>
Depending a lot on how the data was entered, the results could become
quite surprising. There is basically a nearly infinite amount of
possible combinations of how to enter data, and it is likely that
myop will not be able to deal with all of them</p>
    </div>
    <div class="section level2">
    <h2 id="internal-preparation">internal preparation<a class="anchor" aria-label="anchor" href="#internal-preparation"></a></h2>


<ul><li><p>Rename data names with  <a href="myop_rename.html">myop_rename</a>, replacing "." with "_"</p></li>
<li><p>Use of <code><a href="sort_substr.html">sort_substr()</a></code> - sorting eye strings first, then strings coding
for methods  (IOP/VA), then the rest.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="myopization">myopization<a class="anchor" aria-label="anchor" href="#myopization"></a></h2>


<p>The actual work is done with <a href="myopizer.html">myopizer</a> and <a href="myop_pivot.html">myop_pivot</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Example to clean a bit messy data frame</span></span></span>
<span class="r-in"><span><span class="va">iopva</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"e"</span>, <span class="st">"j"</span>, <span class="st">"h"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  va_r <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">37L</span>, <span class="fl">36L</span>, <span class="fl">33L</span>, <span class="fl">38L</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  iop_r <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">38L</span>, <span class="fl">40L</span>, <span class="fl">33L</span>, <span class="fl">34L</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  va_l <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">30L</span>, <span class="fl">39L</span>, <span class="fl">37L</span>, <span class="fl">40L</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  iop_l <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">31L</span>, <span class="fl">34L</span>, <span class="fl">33L</span>, <span class="fl">31L</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">myop</span><span class="op">(</span><span class="va">iopva</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 8 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id    eye   va    iop  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> a     right 37    38   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> a     left  30    31   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> e     right 36    40   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> e     left  39    34   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> j     right 33    33   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> j     left  37    33   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">7</span> h     right 38    34   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">8</span> h     left  40    31   </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">iop_wide</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>,  r <span class="op">=</span> <span class="fl">11</span><span class="op">:</span><span class="fl">13</span> , l <span class="op">=</span> <span class="fl">14</span><span class="op">:</span><span class="fl">16</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># the variable has not been exactly named, so you can specify</span></span></span>
<span class="r-in"><span><span class="co"># it with the var argument</span></span></span>
<span class="r-in"><span><span class="fu">myop</span><span class="op">(</span><span class="va">iop_wide</span>, var <span class="op">=</span> <span class="st">"iop"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 6 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id    eye   iop  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> a     right 11   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> a     left  14   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> b     right 12   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> b     left  15   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> c     right 13   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> c     left  16   </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tjebo Heeren.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

