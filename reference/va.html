<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Visual acuity notation conversion — va • eye</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Visual acuity notation conversion — va"><meta name="description" content="Cleans and converts visual acuity notations (classes)
between Snellen (decimal, meter and feet), ETDRS, and logMAR."><meta property="og:description" content="Cleans and converts visual acuity notations (classes)
between Snellen (decimal, meter and feet), ETDRS, and logMAR."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">eye</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/eye.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="nav-link" href="https://github.com/tjebo/eye/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Visual acuity notation conversion</h1>
      <small class="dont-index">Source: <a href="https://github.com/tjebo/eye/blob/master/R/va.R"><code>R/va.R</code></a></small>
      <div class="d-none name"><code>va.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Cleans and converts visual acuity notations (classes)
between Snellen (decimal, meter and feet), ETDRS, and logMAR.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">va</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  from <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  to <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"ft"</span>,</span>
<span>  smallstep <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  noplus <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  quali_values <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>Vector with visual acuity entries. Must be atomic.
Snellen fractions need to be entered with "/"</p></dd>


<dt id="arg-from">from<a class="anchor" aria-label="anchor" href="#arg-from"></a></dt>
<dd><p>will force to evaluate from which notation to convert - Must be
"etdrs", "logmar", "snellen" or "snellendec".
Ignored if the value should not be plausible.</p></dd>


<dt id="arg-to">to<a class="anchor" aria-label="anchor" href="#arg-to"></a></dt>
<dd><p>To which class to convert. "etdrs", "logmar" or "snellen" -
any case allowed. If NULL (default), will simply "clean up" VA entries.
This may then result in a vector of "mixed" VA notations.</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>To which Snellen notation to convert: "m", "dec" or "ft"</p></dd>


<dt id="arg-smallstep">smallstep<a class="anchor" aria-label="anchor" href="#arg-smallstep"></a></dt>
<dd><p>how +/- entries are evaluated. FALSE:
increase/decrease Snellen fractions by lines. TRUE: plus/minus
entries equivalent to 0.02 logmar</p></dd>


<dt id="arg-noplus">noplus<a class="anchor" aria-label="anchor" href="#arg-noplus"></a></dt>
<dd><p>ignoring plus/minus entries and just returning the
snellen fraction. This overrides the smallstep argument.</p></dd>


<dt id="arg-quali-values">quali_values<a class="anchor" aria-label="anchor" href="#arg-quali-values"></a></dt>
<dd><p>define your own values for qualitative entries (see details)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>vector of <code>va</code> class. See also "VA classes"</p>
    </div>
    <div class="section level2">
    <h2 id="va-conversion">VA conversion<a class="anchor" aria-label="anchor" href="#va-conversion"></a></h2>


<ul><li><p><strong>logMAR to ETDRS</strong>: logMAR rounded to the first digit and converted with
the visual acuity chart (see section VA chart)</p></li>
<li><p><strong>Snellen to logMAR</strong>: logMAR = -1 * log10(snellen_frac)</p></li>
<li><p><strong>Snellen to ETDRS</strong>: ETDRS = 85 + 50 * log10(snellen_frac)
Gregori et al. DOI: 10.1097/iae.0b013e3181d87e04</p></li>
<li><p><strong>ETDRS to logMAR</strong>: logMAR = -0.02 * etdrs + 1.7
Beck et al. DOI: 10.1016/s0002-9394(02)01825-1</p></li>
<li><p><strong>Hand movements and counting fingers</strong> are converted following
Schulze-Bonsel et al. DOI: 10.1167/iovs.05-0981</p></li>
<li><p><strong>(No) light perception</strong> are converted following the suggestions by
<a href="https://michaelbach.de/sci/acuity.html" class="external-link">Michael Bach</a></p></li>
</ul></div>
    <div class="section level2">
    <h2 id="qualitative-visual-acuity-entries">Qualitative visual acuity entries<a class="anchor" aria-label="anchor" href="#qualitative-visual-acuity-entries"></a></h2>


<p>In order to calculate with qualitative entries counting fingers,
hand movement and (no) perception of light, <strong>use logMAR</strong> !
Qualitative visual acuity lower than counting fingers is assigned 0
ETDRS letter, in order to keep it as a measurement (not: NA). It is very
difficult to justify a "negative" letter score in a test which only has
a specific range (0-100).
By default, <code>va</code> recognises the following values (case does not matter!)</p><ul><li><p>No light perception := c("nlp", "no light perception", "no light", "no perception of light", "npl"),</p></li>
<li><p>Light perception: = c("lp", "light perception", "perception of light", "pl"),</p></li>
<li><p>Hand movements: = c("hm",  "handmotion", "hand movement", "hand movements"),</p></li>
<li><p>Counting fingers: = c("cf", "counting finger", "counting fingers", "finger count", "count fingers")</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="custom-values-for-qualitative-entries">Custom values for qualitative entries<a class="anchor" aria-label="anchor" href="#custom-values-for-qualitative-entries"></a></h2>


<p>To define your own values for qualitative entries, you need to
pass a names list with names c("cf", "hm", "nlp", "lp") - in that order.
It accepts only values that can be reasonably converted into numeric values
and it converts only to logMAR.
If you want to convert to a different notation, you will need to
call va() a second time.</p>
    </div>
    <div class="section level2">
    <h2 id="converting-to-snellen">Converting to Snellen<a class="anchor" aria-label="anchor" href="#converting-to-snellen"></a></h2>


<p>Although there seems to be no good statistical reason to convert
back to Snellen, it is a very natural thing to eye specialists to think
in Snellen. A conversion to snellen gives a good gauge of how the visual
acuity for the patients are. However, back-conversion should not be
considered an exact science and any attempt to use formulas will result
in very weird Snellen values that have no correspondence to common charts.
Therefore, Snellen matching the nearest ETDRS and logMAR value in
the VA chart are used.</p>
    </div>
    <div class="section level2">
    <h2 id="va-chart">VA chart<a class="anchor" aria-label="anchor" href="#va-chart"></a></h2>


<p>You can find the chart with <code>eye:::va_chart</code>.
This chart and VA conversion formulas are based on charts in
Holladay et al. DOI: 10.1016/j.jcrs.2004.01.014,
Beck et al. DOI: 10.1016/s0002-9394(02)01825-1, and
Gregori et al. DOI: 10.1097/iae.0b013e3181d87e04.</p>
<p>The ETDRS values for NLP and PL are deliberately set at those values because
they are unlikely to happen by chance as a wrong entry (and as integers),
and it has internal reasons that make conversion easier.</p>
    </div>
    <div class="section level2">
    <h2 id="accepted-va-formats-plausibility-checks">Accepted VA formats / Plausibility checks<a class="anchor" aria-label="anchor" href="#accepted-va-formats-plausibility-checks"></a></h2>


<ul><li><p>Snellen fractions (meter/ feet) need to be entered as fraction with
"/". Any fractions allowed. You can get creative with your snellens.
see <strong>"Examples"</strong></p></li>
<li><p>ETDRS must be integer-equivalent between 0 and 100 (integer equivalent
means, it can also be a character vector)</p></li>
<li><p>logMAR must be -0.3 &lt;= x &lt;= 3.0</p></li>
<li><p>Snellen decimal must be 0 &lt; x &lt;= 2</p></li>
<li><p>Qualitative must be either of PL, LP, NLP, NPL, HM, CF (any case allowed)</p></li>
<li><p>Plausibility checks are performed for the automatically or manually defined
notation.</p></li>
<li><p>Any element which is implausible/ not recognized will be converted to NA</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="entries-with-mixed-va-notations">Entries with mixed VA notations<a class="anchor" aria-label="anchor" href="#entries-with-mixed-va-notations"></a></h2>


<p>Use <a href="va_mixed.html">va_mixed</a> instead.</p>
    </div>
    <div class="section level2">
    <h2 id="snellen-entries">Snellen "+/-" entries<a class="anchor" aria-label="anchor" href="#snellen-entries"></a></h2>


<p>By default, plus/minus entries are evaluated as intended by the
test design: Snellen fractions increase/decrease only by lines.</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="sc">-</span> <span class="cf">if</span> entry <span class="sc">-</span><span class="dv">2</span> to <span class="sc">+</span><span class="dv">2</span> <span class="sc">:</span> take same Snellen value</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="sc">-</span> <span class="cf">if</span> <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">2</span> <span class="sc">:</span> take Snellen value one line below</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="sc">-</span> <span class="cf">if</span> <span class="sc">&gt;</span> <span class="sc">+</span><span class="dv">2</span> <span class="sc">:</span> take Snellen value one line above</span></code></pre><p></p></div>
<p>If smallstep = TRUE, each snellen optotype will be considered
equivalent to 0.02 logmar (assuming 5 letters in a row in a chart)</p>
    </div>
    <div class="section level2">
    <h2 id="va-cleaning">VA cleaning<a class="anchor" aria-label="anchor" href="#va-cleaning"></a></h2>


<p>For more details see <code><a href="clean_va.html">clean_va()</a></code></p><ol><li><p><code>NA</code> is assigned to strings such as "." or "", "n/a" or "   "</p></li>
<li><p>notation for qualitative entries is simplified.</p></li>
</ol></div>
    <div class="section level2">
    <h2 id="va-classes">VA classes<a class="anchor" aria-label="anchor" href="#va-classes"></a></h2>


<p>Under the hood, <code>convertVA</code> returns a vector that has three classes:</p><ol><li><p><code>va</code></p></li>
<li><p>One of snellen, snellendec, logmar, etdrs or quali.</p></li>
<li><p>Either of <code>character</code> (for Snellen, Snellen decimal, and qualitative),
<code>numeric</code> (for logMAR), or <code>integer</code> (for ETDRS).</p></li>
</ol></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other Ophthalmic functions:
<code><a href="va_mixed.html">va_mixed</a>()</code></p>
<p>Other VA converter:
<code><a href="VAwrapper.html">VAwrapper</a></code>,
<code><a href="plausibility_methods.html">plausibility_methods</a></code>,
<code><a href="snellen_steps.html">snellen_steps</a></code>,
<code><a href="va_methods.html">va_methods</a></code>,
<code><a href="va_mixed.html">va_mixed</a>()</code>,
<code><a href="which_va.html">which_va</a>()</code></p>
<p>Other VA cleaner:
<code><a href="clean_va.html">clean_va</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## calling va without specifying "to" will clean visual acuity entries</span></span></span>
<span class="r-in"><span><span class="co">## without conversion into another notation. Weird entries will be</span></span></span>
<span class="r-in"><span><span class="co">## replaced by a missing value that R recognises as such</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">23</span>, <span class="st">""</span>, <span class="cn">NA</span>, <span class="st">"N/A"</span>, <span class="st">"Not measured"</span>, <span class="st">"20/50"</span>, <span class="fl">74</span>, <span class="fl">58</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">va</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 3x NA introduced for: , N/A, Not measured</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "23"    NA      NA      NA      NA      "20/50" "74"    "58"   </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ... or convert to snellen</span></span></span>
<span class="r-in"><span><span class="fu">va</span><span class="op">(</span><span class="va">x</span>, to <span class="op">=</span> <span class="st">"snellen"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> From snellen. Could be snellen, logmar, snellendec, etdrs</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 6x NA introduced for: 23, , N/A, Not measured, 74, 58</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] NA      NA      NA      NA      NA      "20/50" NA      NA     </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Dealing with those "plus/minus" entries, and qualitative values such as "HM"</span></span></span>
<span class="r-in"><span><span class="fu">va</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NLP"</span>, <span class="st">"NPL"</span>, <span class="st">"PL"</span>, <span class="st">"LP"</span>, <span class="st">"HM"</span>, <span class="st">"CF"</span>, <span class="st">"6/60"</span>, <span class="st">"20/200"</span>, <span class="st">"6/9"</span>,</span></span>
<span class="r-in"><span> <span class="st">"20/40"</span>, <span class="st">"20/40+3"</span>, <span class="st">"20/50-2"</span><span class="op">)</span>, to <span class="op">=</span> <span class="st">"snellen"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> From snellen</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "20/20000" "20/20000" "20/10000" "20/10000" "20/4000"  "20/2000" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] "20/200"   "20/200"   "20/32"    "20/40"    "20/32"    "20/50"   </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## A mix of notations is also possible</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NLP"</span>, <span class="st">"0.8"</span>, <span class="st">"34"</span>, <span class="st">"3/60"</span>, <span class="st">"2/200"</span>, <span class="st">"20/40+3"</span>, <span class="st">"20/50-2"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">va</span><span class="op">(</span><span class="va">x</span>, to <span class="op">=</span> <span class="st">"snellen"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> From snellen. Could be snellen, logmar, snellendec, etdrs</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 2x NA introduced for: 0.8, 34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "20/20000" NA         NA         "20/400"   "20/2000"  "20/32"    "20/50"   </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Any fraction is possible, and empty values</span></span></span>
<span class="r-in"><span><span class="co">## change Snellen type to meter with type = "m"</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CF"</span>, <span class="st">"3/60"</span>, <span class="st">"2/200"</span>, <span class="st">""</span>, <span class="st">"20/40+3"</span>, <span class="st">"."</span>, <span class="st">"      "</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">va</span><span class="op">(</span><span class="va">x</span>, to <span class="op">=</span> <span class="st">"snellen"</span>, type <span class="op">=</span> <span class="st">"m"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> From snellen</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 3x NA introduced for: , .,       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "6/600" "6/120" "6/600" NA      "6/9.6" NA      NA     </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tjebo Heeren.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

