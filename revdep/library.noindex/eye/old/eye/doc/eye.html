<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Tjebo Heeren" />

<meta name="date" content="2020-06-25" />

<title>eye</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">eye</h1>
<h4 class="author">Tjebo Heeren</h4>
<h4 class="date">2020-06-25</h4>



<div id="see-more-with-eye" class="section level2">
<h2>See more with <em>eye</em></h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(eye)</a></code></pre></div>
</div>
<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p><em>eye</em> is dedicated to facilitate ophthalmic research, providing convenient application programming interfaces (API) for common tasks:</p>
<ul>
<li><a href="#va">Visual acuity conversion</a> between Snellen, logMAR and ETDRS</li>
<li><a href="#eyes">Counting patients and eyes</a></li>
<li><a href="#reshape-eye-data">Reshaping eye specific variables</a>: One column for “eye” (r/l) and dedicated columns for each eye-related variable, or vice-versa</li>
<li><a href="#recode">Recoding the eye variable</a></li>
</ul>
<p>Further, it provides tools for easy data summaries and calculations:</p>
<ul>
<li><a href="#reveal">Summarizing data</a> with common statistics (mean, sd, n, range)</li>
<li>Summarize your data in a <a href="#blink">blink of an eye</a></li>
<li><a href="#age">Calculating age</a> of patients</li>
</ul>
<p><em>eye</em> includes <a href="#amd">the real life data set <code>amd</code></a>, of people who received intravitreal anti-VEGF injections for treatment naive neovascular age-related macular degeneration in <strong>Moorfields Eye Hospital</strong>. (Fasler et al. 2019)</p>
<p><em>eye</em> includes a <a href="#va-conversion-chart">visual acuity conversion chart</a>.</p>
</div>
<div id="amd" class="section level2">
<h2>AMD data set</h2>
<p><code>amd</code> is an anonymised real life data set from a large cohort of patients with treatment-naive neovascular age-related macular degeneration (AMD) who received intravitreal anti-VEGF therapy in Moorfields Eye Hospital, London, UK. Data was accessed on the 25th May 2020 <a href="https://datadryad.org/stash/dataset/doi:10.5061/dryad.97r9289">from the source</a></br> <strong>Kindly reference this data by citing the corresponding publication</strong>. (Fasler et al. 2019)</p>
<p>There are erroneous visual acuity entries in this data set which I noticed during the work on this package. The data set curator investigated and concluded that these were erroneous entries in the original medical health records. I decided to keep the values in the data set and wait for the final decision how to proceed from the data set curator (if they are going to replace it with missing values or not). I believe this is a great example for the challenges of real life data and a reminder to remain vigilant when doing data analysis.</p>
</div>
<div id="va" class="section level2">
<h2>Visual acuity conversion</h2>
<p>Easy conversion from visual acuity notations in a single call to <code>va()</code>:</p>
<p><code>va()</code> cleans and converts visual acuity notations (classes) between Snellen (decimal, meter and feet), ETDRS, and logMAR. Each class can be converted from one to another, but <code>va()</code> converts to logMAR by default. <code>va()</code> will detect the class automatically based on specific rules detailed below.</p>
<p>It takes an (atomic) vector with visual acuity entries as the only required argument. The user can specify the original VA notation, but va will check that and ignore the argument if implausible.</p>
<div id="conversion-steps" class="section level3">
<h3>Conversion steps</h3>
<p><code>va()</code> basically runs three main steps:</p>
<ol style="list-style-type: decimal">
<li><a href="#cleaning">Entry cleaning</a> with <code>clean_va()</code></li>
<li><a href="#detection">Notation detection</a> with <code>which_va()</code></li>
<li><a href="#conversion">Conversion</a> with the S3 generic <code>convertVA()</code></li>
</ol>
</div>
<div id="cleaning" class="section level3">
<h3>Cleaning</h3>
<ol style="list-style-type: decimal">
<li><code>NA</code> are assigned to missing entries or strings representing such entries (“.”, &quot;“,”{any number of spaces}“,”N/A“,”NA“,”NULL&quot;)</li>
<li>Notation for qualitative entries is simplified (NPL becomes NLP, PL becomes LP).</li>
<li>“plus” and “minus” from Snellen entries are converted:
<ul>
<li>if entry -1 to +3 : take same Snellen value</li>
<li>if &lt;= -2 : take Snellen value one line below</li>
<li>if &gt;+3 (unlikely, but unfortunately not impossible): Snellen value one line above</li>
</ul></li>
</ol>
<p>Snellen are unfortunately often entered with “+/-”, which is a violation of psychophysical methods designed to assign one (!) unambiguous value to visual acuity, with non-arbitrary thresholds based on psychometric functions. Therefore, transforming “+/-” notation to actual results is in itself problematic and the below suggestion to convert it will remain an approximation to the most likely “true” result. Even more so, as the given conditions should work for charts with 4 or 5 optotypes in a line, and visual acuity is not always tested on such charts. Yet, I believe that the approach is still better than just omitting the letters or (worse) assigning a missing value to those entries.</p>
<p>If the argument <code>logmarstep = TRUE</code>, the entries will be converted to logmar values or or ETDRS letters (0.02 logmar or 1 letter for each optotype). This is based on the assumption of 5 optotypes in a row. The argument should not be set <code>TRUE</code> when conversion to Snellen is desired - this does not make sense. However, if you still decide to do that, you will get the values just without +/- entries.</p>
</div>
<div id="detection" class="section level3">
<h3>Detection</h3>
<ul>
<li>Internally done with <code>which_va()</code> based on the following rules</li>
<li>if x integer and 3 &lt; x &lt;= 100: <code>etdrs</code></li>
<li>if x integer and 0 &lt;= x &lt;= 3: <code>logmar</code>, but you can choose <code>etdrs</code></li>
<li>if x numeric and -0.3 &lt;= x &lt;= 3: <code>logmar</code></li>
<li>if x numeric and all x in <code>intersection(va_chart$logMAR, va_chart$snellen_dec)</code>: default to <code>logmar</code>, but you can choose <code>snellen</code> (then snellen decimal)</li>
<li><em>non-mixed class</em>: if all x in va_chart$snellen_dec: <code>snellen</code></li>
<li><em>mixed class</em> ([which_va_dissect]): snellen_dec not supported.</li>
<li>if character and format x/y: <code>snellen</code> (fraction)</li>
<li>if one of “CF”, “HM”, “LP”, “PL”, “NLP”, or “NPL”: <code>quali</code></li>
<li>if numeric x beyond the ranges from above: <code>NA</code> (with a warning that values outside the range were found)</li>
<li>Any other string or NA: NA</li>
</ul>
<div id="accepted-va-formats" class="section level4">
<h4>Accepted VA formats</h4>
<ul>
<li>Snellen fractions (meter/ feet) need to be entered as fraction with “/”.</li>
<li><strong>converting Snellen to ETDRS or logMAR</strong>: any fraction is allowed , e.g. 3/60 and 2/200 will also be recognized.</li>
<li><strong>converting between Snellen fractions</strong>: <em>has to be either 6/ or 20/</em>. Other fractions will not be recognized. See also <strong>“Examples”</strong></li>
<li>ETDRS must be integer-equivalent between 0 and 100 (integer equivalent means, it can also be a character vector)</li>
<li>logMAR must be between -0.3 and 3.0</li>
<li>Qualitative must be either of PL, LP, NLP, NPL, HM, CF (any case allowed)</li>
<li>Any element which is not recognized will be converted to NA</li>
</ul>
</div>
</div>
<div id="conversion" class="section level3">
<h3>Conversion</h3>
<ul>
<li><strong>logMAR to ETDRS</strong>: logMAR rounded to the first digit and converted with the chart.</li>
<li><strong>Snellen to logMAR</strong>: logMAR = -1 * log10(snellen_frac)</li>
<li><strong>Snellen to ETDRS</strong>: ETDRS = 85 + 50 * log10(snellen_frac) <a href="https://doi.org/10.1097/iae.0b013e3181d87e04">Gregori et al.</a>.</li>
<li><strong>ETDRS to logMAR</strong>: logMAR = -0.02 * etdrs + 1.7 <a href="https://doi.org/10.1016/s0002-9394(02)01825-1">Beck et al.</a></li>
<li><strong>Hand movements and counting fingers</strong> are converted following <a href="https://doi.org/10.1167/iovs.05-0981">Schulze-Bonsel et al.</a></li>
<li><strong>(No) light perception</strong> are converted following the suggestions by <a href="https://michaelbach.de/sci/acuity.html">Michael Bach</a></li>
<li><strong>To Snellen</strong>: Although there seems to be no good statistical reason to convert back to Snellen, it is a very natural thing to eye specialists to think in Snellen. A conversion to snellen gives a good gauge of how the visual acuity for the patients are. However, back-conversion should not be considered an exact science and any attempt to use formulas will result in very weird Snellen values that have no correspondence to common charts. Therefore, Snellen matching the nearest ETDRS and logMAR value in <a href="#va-conversion-chart">the VA conversion chart</a> are used.</li>
</ul>
<p>Detection and conversion is on a vector as a whole by <code>which_va()</code>. If a “mixed” VA notation is found, <code>which_va_dissect()</code> and <code>va_dissect()</code> will be called instead for each VA vector element individually.</p>
</div>
<div id="problematic-cases" class="section level3">
<h3>Problematic cases:</h3>
<p>There can be ambiguous cases for detection (detection defaults to logmar):</p>
<ul>
<li>x is one of 0,1,2,3 - This can be both ETDRS and logMAR.</li>
<li>x is one of c(1.5, 1, 0.8, 0.5, 0.4, 0.3, 0.2, 0.1, 0) - This can be Snellen decimal or logMAR.</li>
</ul>
<p><strong>Snellen decimals</strong> are a particular challenge and <code>va</code> may wrongly assign logMAR - this could happen if there are unusual snellen decimal values in the data which are not part of the <a href="#va-conversion-chart">VA conversion chart</a>.</p>
<p>E.g., check the values with <code>unique(x)</code>.</p>
</div>
<div id="examples" class="section level3">
<h3>Examples</h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co">## automatic detection of VA notation and converting to logMAR by default</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">23</span>, <span class="dv">56</span>, <span class="dv">74</span>, <span class="dv">58</span>) <span class="co">## ETDRS letters</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="kw">va</span>(x)</a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">#&gt; x: from etdrs</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co">#&gt; [1] 1.24 0.58 0.22 0.54</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="kw">va</span>(x, <span class="dt">to =</span> <span class="st">&quot;snellen&quot;</span>) <span class="co">## ... or convert to snellen</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="co">#&gt; x: from etdrs</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="co">#&gt; [1] &quot;20/320&quot; &quot;20/80&quot;  &quot;20/32&quot;  &quot;20/70&quot;</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="co">## A mix of notations</span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;NLP&quot;</span>, <span class="st">&quot;0.8&quot;</span>, <span class="st">&quot;34&quot;</span>, <span class="st">&quot;3/60&quot;</span>, <span class="st">&quot;2/200&quot;</span>, <span class="st">&quot;20/50&quot;</span>)</a>
<a class="sourceLine" id="cb2-13" data-line-number="13"><span class="kw">va</span>(x)</a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="co">#&gt; Mixed object (x) - converting one by one</span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="co">#&gt; [1] 3.00 0.80 1.02 1.30 2.00 0.40</span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16"></a>
<a class="sourceLine" id="cb2-17" data-line-number="17"><span class="co">## &quot;plus/minus&quot; entries are converted to the most probable threshold (any spaces allowed)</span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;20/200&quot;</span>, <span class="st">&quot;20/200 - 1&quot;</span>, <span class="st">&quot;6/6&quot;</span>, <span class="st">&quot;6/6-2&quot;</span>, <span class="st">&quot;20/50 + 3&quot;</span>, <span class="st">&quot;20/50 -2&quot;</span>)</a>
<a class="sourceLine" id="cb2-19" data-line-number="19"><span class="kw">va</span>(x)</a>
<a class="sourceLine" id="cb2-20" data-line-number="20"><span class="co">#&gt; x: from snellen</span></a>
<a class="sourceLine" id="cb2-21" data-line-number="21"><span class="co">#&gt; [1] 1.00 1.00 0.00 0.10 0.40 0.48</span></a>
<a class="sourceLine" id="cb2-22" data-line-number="22"></a>
<a class="sourceLine" id="cb2-23" data-line-number="23"><span class="co">## or evaluating them as logmar values </span></a>
<a class="sourceLine" id="cb2-24" data-line-number="24"><span class="kw">va</span>(x, <span class="dt">logmarstep =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb2-25" data-line-number="25"><span class="co">#&gt; x: from snellen</span></a>
<a class="sourceLine" id="cb2-26" data-line-number="26"><span class="co">#&gt; [1]  1.00  0.98  0.00 -0.04  0.46  0.36</span></a>
<a class="sourceLine" id="cb2-27" data-line-number="27"></a>
<a class="sourceLine" id="cb2-28" data-line-number="28"><span class="co">## on the inbuilt data set:</span></a>
<a class="sourceLine" id="cb2-29" data-line-number="29"><span class="kw">head</span>(<span class="kw">va</span>(amd<span class="op">$</span>VA_ETDRS_Letters), <span class="dv">10</span>) </a>
<a class="sourceLine" id="cb2-30" data-line-number="30"><span class="co">#&gt; Warning: amd$VA_ETDRS_Letters (from etdrs): NA introduced - implausible values</span></a>
<a class="sourceLine" id="cb2-31" data-line-number="31"><span class="co">#&gt;  [1] 0.82 0.08 0.70 0.90 1.06 1.02 0.96 1.06 0.40 0.46</span></a>
<a class="sourceLine" id="cb2-32" data-line-number="32"></a>
<a class="sourceLine" id="cb2-33" data-line-number="33"><span class="co">## and indeed, there are unplausible ETDRS values in this data set:</span></a>
<a class="sourceLine" id="cb2-34" data-line-number="34"><span class="kw">range</span>(amd<span class="op">$</span>VA_ETDRS_Letters)</a>
<a class="sourceLine" id="cb2-35" data-line-number="35"><span class="co">#&gt; [1]   0 105</span></a>
<a class="sourceLine" id="cb2-36" data-line-number="36"></a>
<a class="sourceLine" id="cb2-37" data-line-number="37"><span class="co">## Any fraction is possible, and empty values</span></a>
<a class="sourceLine" id="cb2-38" data-line-number="38">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;CF&quot;</span>, <span class="st">&quot;3/60&quot;</span>, <span class="st">&quot;2/200&quot;</span>, <span class="st">&quot;&quot;</span>, <span class="st">&quot;20/40+3&quot;</span>, <span class="st">&quot;.&quot;</span>, <span class="st">&quot;      &quot;</span>)</a>
<a class="sourceLine" id="cb2-39" data-line-number="39"><span class="kw">va</span>(x)</a>
<a class="sourceLine" id="cb2-40" data-line-number="40"><span class="co">#&gt; x: from snellen</span></a>
<a class="sourceLine" id="cb2-41" data-line-number="41"><span class="co">#&gt; [1] 2.0 1.3 2.0  NA 0.3  NA  NA</span></a>
<a class="sourceLine" id="cb2-42" data-line-number="42"></a>
<a class="sourceLine" id="cb2-43" data-line-number="43"><span class="co">## but not when converting from one class to the other</span></a>
<a class="sourceLine" id="cb2-44" data-line-number="44">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;3/60&quot;</span>, <span class="st">&quot;2/200&quot;</span>, <span class="st">&quot;6/60&quot;</span>, <span class="st">&quot;20/200&quot;</span>, <span class="st">&quot;6/9&quot;</span>)</a>
<a class="sourceLine" id="cb2-45" data-line-number="45"><span class="kw">va</span>(x, <span class="dt">to=</span><span class="st">&quot;snellen&quot;</span>, <span class="dt">type =</span> <span class="st">&quot;m&quot;</span>)</a>
<a class="sourceLine" id="cb2-46" data-line-number="46"><span class="co">#&gt; x: from snellen</span></a>
<a class="sourceLine" id="cb2-47" data-line-number="47"><span class="co">#&gt; [1] NA     NA     &quot;6/60&quot; &quot;6/60&quot; &quot;6/9&quot;</span></a></code></pre></div>
</div>
</div>
<div id="recode" class="section level2">
<h2>recodeye</h2>
<p>Makes recoding eye variables very easy.</p>
<ul>
<li><code>recodeye</code> recognizes integer coding 0:1 and 1:2, with right being the lower number.</li>
<li>For character coding the following codes are recognized as a default: <code>c(&quot;r&quot;, &quot;re&quot;, &quot;od&quot;, &quot;right&quot;)</code> and left eyes: <code>c(&quot;l&quot;, &quot;le&quot;, &quot;os&quot;, &quot;left&quot;)</code>.</li>
</ul>
<p>If you have different codes, you can change the recognized strings with the <code>eyecodes</code> argument, which needs to be a list. But remember to put the strings for right eyes first!</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;r&quot;</span>, <span class="st">&quot;re&quot;</span>, <span class="st">&quot;od&quot;</span>, <span class="st">&quot;right&quot;</span>, <span class="st">&quot;l&quot;</span>, <span class="st">&quot;le&quot;</span>, <span class="st">&quot;os&quot;</span>, <span class="st">&quot;left&quot;</span>)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw">recodeye</span>(x)</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt; [1] &quot;r&quot; &quot;r&quot; &quot;r&quot; &quot;r&quot; &quot;l&quot; &quot;l&quot; &quot;l&quot; &quot;l&quot;</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">## chose the resulting codes</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="kw">recodeye</span>(x, <span class="dt">to =</span> <span class="kw">c</span>(<span class="st">&quot;right&quot;</span>, <span class="st">&quot;left&quot;</span>))</a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt; [1] &quot;right&quot; &quot;right&quot; &quot;right&quot; &quot;right&quot; &quot;left&quot;  &quot;left&quot;  &quot;left&quot;  &quot;left&quot;</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">## Or if you have weird codes for eyes</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;alright&quot;</span>, <span class="st">&quot;righton&quot;</span>, <span class="st">&quot;lefty&quot;</span>,<span class="st">&quot;leftover&quot;</span>)</a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="kw">recodeye</span>(x, <span class="dt">eyecodes =</span> <span class="kw">list</span>(<span class="kw">c</span>(<span class="st">&quot;alright&quot;</span>,<span class="st">&quot;righton&quot;</span>), <span class="kw">c</span>(<span class="st">&quot;lefty&quot;</span>,<span class="st">&quot;leftover&quot;</span>)))</a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="co">#&gt; [1] &quot;r&quot; &quot;r&quot; &quot;l&quot; &quot;l&quot;</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="co">## Numeric codes 0:1/ 1:2 are recognized </span></a>
<a class="sourceLine" id="cb3-15" data-line-number="15">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">2</span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16"><span class="kw">recodeye</span>(x)</a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="co">#&gt; Eyes coded 1:2. Interpreting r = 1</span></a>
<a class="sourceLine" id="cb3-18" data-line-number="18"><span class="co">#&gt; [1] &quot;r&quot; &quot;l&quot;</span></a>
<a class="sourceLine" id="cb3-19" data-line-number="19"></a>
<a class="sourceLine" id="cb3-20" data-line-number="20"><span class="co">## chose the resulting codes</span></a>
<a class="sourceLine" id="cb3-21" data-line-number="21"><span class="kw">recodeye</span>(x, <span class="dt">to =</span> <span class="kw">c</span>(<span class="st">&quot;right&quot;</span>, <span class="st">&quot;left&quot;</span>))</a>
<a class="sourceLine" id="cb3-22" data-line-number="22"><span class="co">#&gt; Eyes coded 1:2. Interpreting r = 1</span></a>
<a class="sourceLine" id="cb3-23" data-line-number="23"><span class="co">#&gt; [1] &quot;right&quot; &quot;left&quot;</span></a>
<a class="sourceLine" id="cb3-24" data-line-number="24"></a>
<a class="sourceLine" id="cb3-25" data-line-number="25"><span class="co">## or, if right is coded with 2)</span></a>
<a class="sourceLine" id="cb3-26" data-line-number="26"><span class="kw">recodeye</span>(x, <span class="dt">numcode =</span> <span class="dv">2</span><span class="op">:</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb3-27" data-line-number="27"><span class="co">#&gt; Eyes coded 2:1 with r = 2</span></a>
<a class="sourceLine" id="cb3-28" data-line-number="28"><span class="co">#&gt; [1] &quot;l&quot; &quot;r&quot;</span></a></code></pre></div>
</div>
<div id="eyes" class="section level2">
<h2>Counting patients and eyes</h2>
<p><code>eyes</code> offers a very simple tool for counting patients and eyes.</p>
<p>An important step in <code>eyes</code> is the guessing of the columns that identify patients and eyes. As for <code>myop</code> and of course <code>blink</code>, a specific column naming is required for a reliable automatic detection of patient and eye column(s) ( <a href="#names-and-codes">see Names and codes</a>)</p>
<p>The arguments <strong>id</strong> and <strong>eye</strong> arguments overrule the name guessing for the respective columns.</p>
<div id="guessing" class="section level3">
<h3>Guessing</h3>
<div id="patient-id-columns" class="section level4">
<h4>patient ID columns:</h4>
<ul>
<li>names can be in any case.</li>
<li>First, <code>eyes</code> is looking for names that contain both strings “pat” and “id” (the order doesn’t matter)</li>
<li>Next, it will look for columns that are plainly called “ID”</li>
<li>Last, it will search for all names that contain either “pat” or “id”</li>
</ul>
</div>
<div id="eye-variable-column" class="section level4">
<h4>eye variable column:</h4>
<ul>
<li>names can be in any case.</li>
<li><code>eyes</code> looks for columns called either “eye” or “eyes”</li>
</ul>
</div>
</div>
<div id="counting" class="section level3">
<h3>Counting</h3>
<p>For counting eyes, eyes need to be coded in commonly used ways. You can use <a href="#recode">recodeye</a> for very convenient recoding.</p>
<ul>
<li><code>eyes</code> recognizes integer coding 0:1 and 1:2, with right being the lower number.</li>
<li>Or, arguably more appropriate in R, character coding for a categorical variable: <code>eyes</code> recognizes right eyes: <code>c(&quot;r&quot;, &quot;re&quot;, &quot;od&quot;, &quot;right&quot;)</code> and left eyes: <code>c(&quot;l&quot;, &quot;le&quot;, &quot;os&quot;, &quot;left&quot;)</code>.</li>
</ul>
</div>
<div id="report" class="section level3">
<h3>Report:</h3>
<p><code>eyes</code> also include a convenience function to turn the count into a text. This is intended for integration into rmarkdown reports, or for easy copy / pasting. <code>eyes_to_string()</code> parses the output of <code>eyes</code> into text under the hood. Arguments to <code>eyes_to_string</code> are passed via <strong>…</strong>:</p>
<ul>
<li><strong>small_num</strong> If TRUE (default): numbers &lt;= 12 will be printed as words.</li>
<li><strong>para</strong> If TRUE (not default): Adding “A total of” to comply with most journal standards and to avoid awkward long numbers.</li>
<li><strong>UK</strong> TRUE: UK style (English) or FALSE (default): US style (American).</li>
</ul>
<p><strong>eyestr</strong> is a shorthand for <code>eyes(x, report = TRUE)</code>. The name was chosen because it’s a contraction of “eyes” and “strings” and it’s a tiny bit easier to type than “eyetxt”.</p>
<div id="use-in-rmarkdown" class="section level4">
<h4>Use in rmarkdown</h4>
<p><code>eyestr</code> was designed with the use in rmarkdown in mind, most explicitly for the use inline:</p>
<blockquote>
<p>We analysed <code>`r eyestr(amd)`</code></p>
</blockquote>
<p><em>will give:</em></p>
<blockquote>
<p>We analysed 3357 eyes of 3357 patients.</p>
</blockquote>
<p>The beauty of this report is of course that the numbers will always update with new data.</p>
</div>
</div>
<div id="examples-1" class="section level3">
<h3>Examples</h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw">eyes</span>(amd)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="co">#&gt; Eyes coded 0:1. Interpreting r = 0</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="co">#&gt; patients     eyes    right     left </span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co">#&gt;     3357     3357     1681     1676</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="co">## or as text for a report</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="kw">eyestr</span>(amd)</a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="co">#&gt; [1] &quot;3357 eyes of 3357 patients&quot;</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9"></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="co">## Complying with journal standards when at beginning of paragraph</span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="kw">eyestr</span>(amd, <span class="dt">para =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="co">#&gt; [1] &quot;A total of 3357 eyes of 3357 patients&quot;</span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13"> </a>
<a class="sourceLine" id="cb4-14" data-line-number="14"><span class="co">## Numbers smaller than or equal to 12 will be real English</span></a>
<a class="sourceLine" id="cb4-15" data-line-number="15"><span class="kw">eyestr</span>(<span class="kw">head</span>(amd, <span class="dv">100</span>))</a>
<a class="sourceLine" id="cb4-16" data-line-number="16"><span class="co">#&gt; [1] &quot;Eleven eyes of eleven patients&quot;</span></a>
<a class="sourceLine" id="cb4-17" data-line-number="17"></a>
<a class="sourceLine" id="cb4-18" data-line-number="18"><span class="co">## But you can turn this off</span></a>
<a class="sourceLine" id="cb4-19" data-line-number="19"><span class="kw">eyestr</span>(<span class="kw">head</span>(amd, <span class="dv">100</span>), <span class="dt">small_num =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb4-20" data-line-number="20"><span class="co">#&gt; [1] &quot;11 eyes of 11 patients&quot;</span></a></code></pre></div>
</div>
</div>
<div id="reshape-eye-data" class="section level2">
<h2>Reshape eye data</h2>
<p>Out of convenience, data is often entered in a “wide” format: In eye research, there will be often two columns for the same variable, one column for each eye.</p>
<p>This may be a necessary data formal for specific questions.</p>
<p>However, “eye” is also variable (a dimension of your observation), and it can also be stored in a separate column. Indeed, in my experience R often needs eyes to be in a single column, with each other variable having their own dedicated column.</p>
<div id="myop" class="section level3">
<h3>myop</h3>
<p>Reshaping many such columns can be a daunting task, and <code>myop()</code> makes this easier. It will remove duplicate rows, and pivot the eye variable to one column and generate a single column for each variable, thus shaping the data for specific types of analysis. For example, eight columns that store data of four variables for right and left eyes will be pivoted to 5 columns (one eye column and four further variable columns)). See also <strong>Examples</strong>.</p>
<p>As with <code>eyes()</code>, <code>myop()</code> requires a specific data format. <a href="#names-and-codes">See names and codes</a> If there is already a column called “eye” or “eyes”, myop will not make any changes - because the data is then already assumed to be in long format.</p>
<p>If there still are variables spread over two columns for right and left eyes, then this is an example of messy data. A solution would be to remove or simply rename the “eye” column and then let myop do the work. However, you need to be very careful in those cases if resulting data frame is plausible.</p>
<p><a href="https://tidyr.tidyverse.org/articles/tidy-data.html">Learn about tidy data.</a></p>
<div id="make-myop-work" class="section level4">
<h4>Make myop work</h4>
<p>myop will work reliably if you adhere to the following:</p>
<ol style="list-style-type: decimal">
<li>Common codes for eyes:
<ul>
<li>Right eyes: <em>“r”, “re”, “od”, “right”</em></li>
<li>Left eyes: <em>“l”, “le”, “os”, “left”</em></li>
</ul></li>
<li>strings for eyes need to be <strong>separated by period or underscores</strong>. (Periods will be replaced by underscores).</li>
<li>Any order of substrings is allowed:
<ul>
<li><strong>Will work</strong>: “va_r”, “right_morningpressure”, “night_iop.le”, “gat_os_postop”</li>
<li><strong>Will fail</strong>: “VAr”, “rightmorningPressure”, “night_IOPle”, “gatOSpostop”</li>
</ul></li>
</ol>
<p>An exception is when there is only one column for each eye. Then the column names can consist of “eye strings” only. In this case, the argument <em>var</em> will be used to name the resulting variable.</p>
<p>If there are only eye columns in your data (should actually not happen), myop will create identifiers by row position.</p>
<p><strong>Please always check the result for plausibility.</strong> Depending a lot on how the data was entered, the results could become quite surprising. There is basically a nearly infinite amount of possible combinations of how to enter data, and it is likely that myop will not be able to deal with all of them.</p>
</div>
<div id="myop-under-the-hood" class="section level4">
<h4>myop under the hood</h4>
<p><code>myop()</code> basically runs three main steps:</p>
<ol style="list-style-type: decimal">
<li>Removing duplicates</li>
<li>Rename data names with <code>myop_rename()</code> and <code>sort_substr()</code>:
<ul>
<li>Replacing “.” by &quot;_&quot;</li>
<li>Re-arranging and recoding substrings in a way that strings for eyes always appear at first position. They will be recoded to “r” and “l”</li>
</ul></li>
<li>Myopization: The actual work is done with <code>myopizer()</code> and <code>myop_pivot()</code> and itself consists of three steps.
<ul>
<li>All columns with an eye string at first position will be selected pivoted to two long colums (<code>key</code> and <code>value</code>) using <code>tidyr::pivot_longer</code>.</li>
<li>The <code>key</code> column will be split by position into an eye column and a <code>variable</code> column.</li>
<li>The <code>variable</code> and <code>value</code> columns will be pivoted wide again with <code>tidyr::pivot_wider</code>.</li>
</ul></li>
</ol>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co">## the variable has not been exactly named, (but it is probably IOP data), </span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="co">## you can specify the dimension with the var argument</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3">wide1 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">id =</span> letters[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>],  <span class="dt">r =</span> <span class="dv">11</span><span class="op">:</span><span class="dv">13</span> , <span class="dt">l =</span> <span class="dv">14</span><span class="op">:</span><span class="dv">16</span>)</a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="kw">myop</span>(wide1, <span class="dt">var =</span> <span class="st">&quot;iop&quot;</span>)</a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co">#&gt; # A tibble: 6 x 3</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co">#&gt;   id    eye   iop  </span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="co">#&gt; 1 a     r     11   </span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co">#&gt; 2 a     l     14   </span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">#&gt; 3 b     r     12   </span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">#&gt; 4 b     l     15   </span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co">#&gt; 5 c     r     13   </span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="co">#&gt; 6 c     l     16</span></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"></a>
<a class="sourceLine" id="cb5-15" data-line-number="15"><span class="co">## If the dimension is already part of the column names, this is not necessary. </span></a>
<a class="sourceLine" id="cb5-16" data-line-number="16">iop_wide &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">id =</span> letters[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>], <span class="dt">iop_r =</span> <span class="dv">11</span><span class="op">:</span><span class="dv">13</span>, <span class="dt">iop_l =</span> <span class="dv">14</span><span class="op">:</span><span class="dv">16</span>)</a>
<a class="sourceLine" id="cb5-17" data-line-number="17"><span class="kw">myop</span>(iop_wide)</a>
<a class="sourceLine" id="cb5-18" data-line-number="18"><span class="co">#&gt; # A tibble: 6 x 3</span></a>
<a class="sourceLine" id="cb5-19" data-line-number="19"><span class="co">#&gt;   id    eye   iop  </span></a>
<a class="sourceLine" id="cb5-20" data-line-number="20"><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb5-21" data-line-number="21"><span class="co">#&gt; 1 a     r     11   </span></a>
<a class="sourceLine" id="cb5-22" data-line-number="22"><span class="co">#&gt; 2 a     l     14   </span></a>
<a class="sourceLine" id="cb5-23" data-line-number="23"><span class="co">#&gt; 3 b     r     12   </span></a>
<a class="sourceLine" id="cb5-24" data-line-number="24"><span class="co">#&gt; 4 b     l     15   </span></a>
<a class="sourceLine" id="cb5-25" data-line-number="25"><span class="co">#&gt; 5 c     r     13   </span></a>
<a class="sourceLine" id="cb5-26" data-line-number="26"><span class="co">#&gt; 6 c     l     16</span></a>
<a class="sourceLine" id="cb5-27" data-line-number="27"></a>
<a class="sourceLine" id="cb5-28" data-line-number="28"><span class="co">## Mildly messy data frame with several variables spread over two columns:</span></a>
<a class="sourceLine" id="cb5-29" data-line-number="29">wide_df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</a>
<a class="sourceLine" id="cb5-30" data-line-number="30">  <span class="dt">id =</span> letters[<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>], </a>
<a class="sourceLine" id="cb5-31" data-line-number="31">  <span class="dt">surgery_right =</span> <span class="kw">c</span>(<span class="st">&quot;TE&quot;</span>, <span class="st">&quot;TE&quot;</span>, <span class="st">&quot;SLT&quot;</span>, <span class="st">&quot;SLT&quot;</span>),</a>
<a class="sourceLine" id="cb5-32" data-line-number="32">  <span class="dt">surgery_left =</span> <span class="kw">c</span>(<span class="st">&quot;TE&quot;</span>, <span class="st">&quot;TE&quot;</span>, <span class="st">&quot;TE&quot;</span>, <span class="st">&quot;SLT&quot;</span>),</a>
<a class="sourceLine" id="cb5-33" data-line-number="33">  <span class="dt">iop_r_preop =</span> <span class="dv">21</span><span class="op">:</span><span class="dv">24</span>, <span class="dt">iop_r_postop =</span> <span class="dv">11</span><span class="op">:</span><span class="dv">14</span>,</a>
<a class="sourceLine" id="cb5-34" data-line-number="34">  <span class="dt">iop_l_preop =</span> <span class="dv">31</span><span class="op">:</span><span class="dv">34</span>, <span class="dt">iop_l_postop =</span> <span class="dv">11</span><span class="op">:</span><span class="dv">14</span>, </a>
<a class="sourceLine" id="cb5-35" data-line-number="35">  <span class="dt">va_r_preop =</span> <span class="dv">41</span><span class="op">:</span><span class="dv">44</span>, <span class="dt">va_r_postop =</span> <span class="dv">45</span><span class="op">:</span><span class="dv">48</span>,</a>
<a class="sourceLine" id="cb5-36" data-line-number="36">  <span class="dt">va_l_preop =</span> <span class="dv">41</span><span class="op">:</span><span class="dv">44</span>, <span class="dt">va_l_postop =</span> <span class="dv">45</span><span class="op">:</span><span class="dv">48</span></a>
<a class="sourceLine" id="cb5-37" data-line-number="37">)</a>
<a class="sourceLine" id="cb5-38" data-line-number="38"></a>
<a class="sourceLine" id="cb5-39" data-line-number="39"><span class="co">## myop deals with this in a breeze:</span></a>
<a class="sourceLine" id="cb5-40" data-line-number="40"><span class="kw">myop</span>(wide_df)</a>
<a class="sourceLine" id="cb5-41" data-line-number="41"><span class="co">#&gt; # A tibble: 8 x 7</span></a>
<a class="sourceLine" id="cb5-42" data-line-number="42"><span class="co">#&gt;   id    eye   surgery iop_preop iop_postop va_preop va_postop</span></a>
<a class="sourceLine" id="cb5-43" data-line-number="43"><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;    &lt;chr&gt;    </span></a>
<a class="sourceLine" id="cb5-44" data-line-number="44"><span class="co">#&gt; 1 a     r     TE      21        11         41       45       </span></a>
<a class="sourceLine" id="cb5-45" data-line-number="45"><span class="co">#&gt; 2 a     l     TE      31        11         41       45       </span></a>
<a class="sourceLine" id="cb5-46" data-line-number="46"><span class="co">#&gt; 3 b     r     TE      22        12         42       46       </span></a>
<a class="sourceLine" id="cb5-47" data-line-number="47"><span class="co">#&gt; 4 b     l     TE      32        12         42       46       </span></a>
<a class="sourceLine" id="cb5-48" data-line-number="48"><span class="co">#&gt; 5 c     r     SLT     23        13         43       47       </span></a>
<a class="sourceLine" id="cb5-49" data-line-number="49"><span class="co">#&gt; 6 c     l     TE      33        13         43       47       </span></a>
<a class="sourceLine" id="cb5-50" data-line-number="50"><span class="co">#&gt; 7 d     r     SLT     24        14         44       48       </span></a>
<a class="sourceLine" id="cb5-51" data-line-number="51"><span class="co">#&gt; 8 d     l     SLT     34        14         44       48</span></a></code></pre></div>
</div>
</div>
<div id="hyperop" class="section level3">
<h3>hyperop</h3>
<p>Basically the opposite of <code>myop()</code> - a slightly intelligent wrapper around <code>tidyr::pivot_longer()</code> and <code>tidyr::pivot_wider()</code>. Will find the eye column, unify the codes for the eyes (all to “r” and “l”) and pivot the columns wide, that have been specified in “cols”. <strong>Again, good names and tidy data always help!</strong></p>
<p>The cols argument takes a tidyselection. <a href="https://tidyselect.r-lib.org/reference/language.html">Read about tidyselection</a></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">myop_df &lt;-<span class="st"> </span><span class="kw">myop</span>(wide_df)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="kw">hyperop</span>(myop_df, <span class="dt">cols =</span> <span class="kw">matches</span>(<span class="st">&quot;va|iop&quot;</span>))</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co">#&gt; # A tibble: 5 x 10</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt;   id    surgery r_iop_preop r_iop_postop r_va_preop r_va_postop l_iop_preop</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;      </span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="co">#&gt; 1 a     TE      21          11           41         45          31         </span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co">#&gt; 2 b     TE      22          12           42         46          32         </span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="co">#&gt; 3 c     SLT     23          13           43         47          &lt;NA&gt;       </span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"><span class="co">#&gt; 4 c     TE      &lt;NA&gt;        &lt;NA&gt;         &lt;NA&gt;       &lt;NA&gt;        33         </span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co">#&gt; 5 d     SLT     24          14           44         48          34         </span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="co">#&gt; # … with 3 more variables: l_iop_postop &lt;chr&gt;, l_va_preop &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="co">#&gt; #   l_va_postop &lt;chr&gt;</span></a></code></pre></div>
</div>
</div>
<div id="blink" class="section level2">
<h2>blink</h2>
<p><strong>See your data in a blink of an eye</strong></p>
<p><code>blink()</code> is more than just a wrapper around <code>myop()</code>, <code>eyes()</code>, <code>va()</code> and <code>reveal()</code>. It will look for VA and for IOP columns and provide the summary stats for the entire cohort and for right and left eyes for each VA and IOP variable.</p>
<p><strong>This, again, requires a certain format of names and codes</strong> - <a href="#names-and-codes">See Names and Codes</a></p>
<div id="work-under-the-hood" class="section level3">
<h3>Work under the hood</h3>
<ol style="list-style-type: decimal">
<li>Removing duplicates</li>
<li>Identification of the index of the VA and IOP columns</li>
<li>Remove certain columns from analysis:
<ul>
<li>Logical columns</li>
<li>Character columns if they are not coding for Snellen fractions or “qualitative visual acuity”</li>
<li>Those with unique values in the range of the vector defined by the argument “fct_level”. Those are removed because they are likely categorical codes. If you have columns with VA or IOP that contain only 0 and 1 for example (which is unlikely, but not impossible), you can just set <code>fct_level = &quot;x&quot;</code> or any other arbitrary value.</li>
</ul></li>
<li>Rename data names with <code>myop_rename()</code> and <code>sort_substr()</code></li>
<li>Getting the new names based on the indices of the columns</li>
<li>Creating a vector of “expected new names” for the summary after myopization</li>
<li>Myopizing if possible</li>
<li>Converting VA vectors to logMAR</li>
<li>Applying <code>reveal()</code> to all VA and IOP columns.</li>
</ol>
<p>As you can imagine, a lot of those steps rely hugely on reasonable naming of your columns and this is what makes this function unfortunately a bit fragile. However, if you adhere to the naming conventions, blink (and myop) will do a great job for you.</p>
<p>If you are not happy with the automatic column selection, you can manually select the VA and IOP columns with the arguments <code>va_cols</code> or <code>iop_cols</code>. Both accept <a href="https://tidyselect.r-lib.org/reference/language.html">tidyselection</a>. I personally find <code>starts_with</code>, <code>ends_with</code>, <code>contains()</code> or the more general <code>matches()</code> very useful.</p>
</div>
<div id="examples-2" class="section level3">
<h3>Examples</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw">blink</span>(wide_df)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="co">#&gt; va_preop: from etdrs</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="co">#&gt; va_postop: from etdrs</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co">#&gt; ── blink ────────────────────────────────────────────────────────────────────────────────</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">#&gt; ══ Data ════════════════════════════════</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co">#&gt; # A tibble: 8 x 7</span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="co">#&gt;   id    eye   surgery iop_preop iop_postop va_preop va_postop</span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;      &lt;logmar&gt; &lt;logmar&gt; </span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10"><span class="co">#&gt; 1 a     r     TE      21        11         0.88     0.80     </span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11"><span class="co">#&gt; 2 a     l     TE      31        11         0.88     0.80     </span></a>
<a class="sourceLine" id="cb7-12" data-line-number="12"><span class="co">#&gt; 3 b     r     TE      22        12         0.86     0.78     </span></a>
<a class="sourceLine" id="cb7-13" data-line-number="13"><span class="co">#&gt; 4 b     l     TE      32        12         0.86     0.78     </span></a>
<a class="sourceLine" id="cb7-14" data-line-number="14"><span class="co">#&gt; 5 c     r     SLT     23        13         0.84     0.76     </span></a>
<a class="sourceLine" id="cb7-15" data-line-number="15"><span class="co">#&gt; 6 c     l     TE      33        13         0.84     0.76     </span></a>
<a class="sourceLine" id="cb7-16" data-line-number="16"><span class="co">#&gt; 7 d     r     SLT     24        14         0.82     0.74     </span></a>
<a class="sourceLine" id="cb7-17" data-line-number="17"><span class="co">#&gt; 8 d     l     SLT     34        14         0.82     0.74     </span></a>
<a class="sourceLine" id="cb7-18" data-line-number="18"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-19" data-line-number="19"><span class="co">#&gt; ══ Count of patient and eyes ═══════════</span></a>
<a class="sourceLine" id="cb7-20" data-line-number="20"><span class="co">#&gt; patients     eyes    right     left </span></a>
<a class="sourceLine" id="cb7-21" data-line-number="21"><span class="co">#&gt;        4        8        4        4 </span></a>
<a class="sourceLine" id="cb7-22" data-line-number="22"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-23" data-line-number="23"><span class="co">#&gt; ══ Visual acuity ═══════════════════════</span></a>
<a class="sourceLine" id="cb7-24" data-line-number="24"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-25" data-line-number="25"><span class="co">#&gt; ── $VA_total (all eyes)</span></a>
<a class="sourceLine" id="cb7-26" data-line-number="26"><span class="co">#&gt;         var mean sd n min max</span></a>
<a class="sourceLine" id="cb7-27" data-line-number="27"><span class="co">#&gt; 1  va_preop  0.8  0 8 0.8 0.9</span></a>
<a class="sourceLine" id="cb7-28" data-line-number="28"><span class="co">#&gt; 2 va_postop  0.8  0 8 0.7 0.8</span></a>
<a class="sourceLine" id="cb7-29" data-line-number="29"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-30" data-line-number="30"><span class="co">#&gt; ── $VA_eyes (right and left eyes)</span></a>
<a class="sourceLine" id="cb7-31" data-line-number="31"><span class="co">#&gt;   eye       var mean sd n min max</span></a>
<a class="sourceLine" id="cb7-32" data-line-number="32"><span class="co">#&gt; 1   l  va_preop  0.8  0 4 0.8 0.9</span></a>
<a class="sourceLine" id="cb7-33" data-line-number="33"><span class="co">#&gt; 2   l va_postop  0.8  0 4 0.7 0.8</span></a>
<a class="sourceLine" id="cb7-34" data-line-number="34"><span class="co">#&gt; 3   r  va_preop  0.8  0 4 0.8 0.9</span></a>
<a class="sourceLine" id="cb7-35" data-line-number="35"><span class="co">#&gt; 4   r va_postop  0.8  0 4 0.7 0.8</span></a>
<a class="sourceLine" id="cb7-36" data-line-number="36"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-37" data-line-number="37"><span class="co">#&gt; ══ Intraocular pressure ════════════════</span></a>
<a class="sourceLine" id="cb7-38" data-line-number="38"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-39" data-line-number="39"><span class="co">#&gt; ── $IOP_total (all eyes)</span></a>
<a class="sourceLine" id="cb7-40" data-line-number="40"><span class="co">#&gt;          var mean  sd n min max</span></a>
<a class="sourceLine" id="cb7-41" data-line-number="41"><span class="co">#&gt; 1  iop_preop 27.5 5.5 8  21  34</span></a>
<a class="sourceLine" id="cb7-42" data-line-number="42"><span class="co">#&gt; 2 iop_postop 12.5 1.2 8  11  14</span></a>
<a class="sourceLine" id="cb7-43" data-line-number="43"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-44" data-line-number="44"><span class="co">#&gt; ── $IOP_eyes (right and left eyes)</span></a>
<a class="sourceLine" id="cb7-45" data-line-number="45"><span class="co">#&gt;   eye        var mean  sd n min max</span></a>
<a class="sourceLine" id="cb7-46" data-line-number="46"><span class="co">#&gt; 1   l  iop_preop 32.5 1.3 4  31  34</span></a>
<a class="sourceLine" id="cb7-47" data-line-number="47"><span class="co">#&gt; 2   l iop_postop 12.5 1.3 4  11  14</span></a>
<a class="sourceLine" id="cb7-48" data-line-number="48"><span class="co">#&gt; 3   r  iop_preop 22.5 1.3 4  21  24</span></a>
<a class="sourceLine" id="cb7-49" data-line-number="49"><span class="co">#&gt; 4   r iop_postop 12.5 1.3 4  11  14</span></a>
<a class="sourceLine" id="cb7-50" data-line-number="50"></a>
<a class="sourceLine" id="cb7-51" data-line-number="51"><span class="kw">blink</span>(amd)</a>
<a class="sourceLine" id="cb7-52" data-line-number="52"><span class="co">#&gt; Warning: Data seems already myopic - no changes made. ?myop for help</span></a>
<a class="sourceLine" id="cb7-53" data-line-number="53"><span class="co">#&gt; Warning: va_etdrs_letters (from etdrs): NA introduced - implausible values</span></a>
<a class="sourceLine" id="cb7-54" data-line-number="54"><span class="co">#&gt; Eyes coded 0:1. Interpreting r = 0</span></a>
<a class="sourceLine" id="cb7-55" data-line-number="55"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-56" data-line-number="56"><span class="co">#&gt; ── blink ────────────────────────────────────────────────────────────────────────────────</span></a>
<a class="sourceLine" id="cb7-57" data-line-number="57"><span class="co">#&gt; ══ Data ════════════════════════════════</span></a>
<a class="sourceLine" id="cb7-58" data-line-number="58"><span class="co">#&gt; # A tibble: 40,764 x 7</span></a>
<a class="sourceLine" id="cb7-59" data-line-number="59"><span class="co">#&gt;    id       eye followupdays baselineage gender va_etdrs_letters injectionnumber</span></a>
<a class="sourceLine" id="cb7-60" data-line-number="60"><span class="co">#&gt;    &lt;chr&gt;  &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;  &lt;dbl&gt; &lt;logmar&gt;                   &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb7-61" data-line-number="61"><span class="co">#&gt;  1 00133…     1            0          99      1 0.82                           1</span></a>
<a class="sourceLine" id="cb7-62" data-line-number="62"><span class="co">#&gt;  2 00133…     1           28          99      1 0.08                           2</span></a>
<a class="sourceLine" id="cb7-63" data-line-number="63"><span class="co">#&gt;  3 00133…     1           67          99      1 0.70                           3</span></a>
<a class="sourceLine" id="cb7-64" data-line-number="64"><span class="co">#&gt;  4 00133…     1          147          99      1 0.90                           4</span></a>
<a class="sourceLine" id="cb7-65" data-line-number="65"><span class="co">#&gt;  5 00133…     1          259          99      1 1.06                           5</span></a>
<a class="sourceLine" id="cb7-66" data-line-number="66"><span class="co">#&gt;  6 00133…     1          343          99      1 1.02                           6</span></a>
<a class="sourceLine" id="cb7-67" data-line-number="67"><span class="co">#&gt;  7 00133…     1          399          99      1 0.96                           7</span></a>
<a class="sourceLine" id="cb7-68" data-line-number="68"><span class="co">#&gt;  8 00133…     1          534          99      1 1.06                           8</span></a>
<a class="sourceLine" id="cb7-69" data-line-number="69"><span class="co">#&gt;  9 00244…     0            0          82      0 0.40                           1</span></a>
<a class="sourceLine" id="cb7-70" data-line-number="70"><span class="co">#&gt; 10 00244…     0           39          82      0 0.46                           2</span></a>
<a class="sourceLine" id="cb7-71" data-line-number="71"><span class="co">#&gt; # … with 40,754 more rows</span></a>
<a class="sourceLine" id="cb7-72" data-line-number="72"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-73" data-line-number="73"><span class="co">#&gt; ══ Count of patient and eyes ═══════════</span></a>
<a class="sourceLine" id="cb7-74" data-line-number="74"><span class="co">#&gt; patients     eyes    right     left </span></a>
<a class="sourceLine" id="cb7-75" data-line-number="75"><span class="co">#&gt;     3357     3357     1681     1676 </span></a>
<a class="sourceLine" id="cb7-76" data-line-number="76"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-77" data-line-number="77"><span class="co">#&gt; ══ Visual acuity ═══════════════════════</span></a>
<a class="sourceLine" id="cb7-78" data-line-number="78"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-79" data-line-number="79"><span class="co">#&gt; ── $VA_total (all eyes)</span></a>
<a class="sourceLine" id="cb7-80" data-line-number="80"><span class="co">#&gt;                var mean  sd     n  min max</span></a>
<a class="sourceLine" id="cb7-81" data-line-number="81"><span class="co">#&gt; 1 va_etdrs_letters  0.5 0.3 40762 -0.3 1.7</span></a>
<a class="sourceLine" id="cb7-82" data-line-number="82"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-83" data-line-number="83"><span class="co">#&gt; ── $VA_eyes (right and left eyes)</span></a>
<a class="sourceLine" id="cb7-84" data-line-number="84"><span class="co">#&gt;   eye              var mean  sd     n  min max</span></a>
<a class="sourceLine" id="cb7-85" data-line-number="85"><span class="co">#&gt; 1   0 va_etdrs_letters  0.5 0.3 20304 -0.3 1.7</span></a>
<a class="sourceLine" id="cb7-86" data-line-number="86"><span class="co">#&gt; 2   1 va_etdrs_letters  0.5 0.3 20458 -0.3 1.7</span></a>
<a class="sourceLine" id="cb7-87" data-line-number="87"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-88" data-line-number="88"><span class="co">#&gt; ══ Intraocular pressure ════════════════</span></a>
<a class="sourceLine" id="cb7-89" data-line-number="89"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-90" data-line-number="90"><span class="co">#&gt; ── $IOP_total (all eyes)</span></a>
<a class="sourceLine" id="cb7-91" data-line-number="91"><span class="co">#&gt; NULL</span></a>
<a class="sourceLine" id="cb7-92" data-line-number="92"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-93" data-line-number="93"><span class="co">#&gt; ── $IOP_eyes (right and left eyes)</span></a>
<a class="sourceLine" id="cb7-94" data-line-number="94"><span class="co">#&gt; NULL</span></a></code></pre></div>
</div>
</div>
<div id="names-and-codes" class="section level2">
<h2>Names and codes</h2>
<p><strong>eye works smoother with tidy data, and with good names</strong> (any package does, really!)</p>
<div id="tidy-data" class="section level3">
<h3>Tidy data</h3>
<p>The basic principle of tidy data is: one column for each dimension and one row for each observation.</p>
<p><a href="https://tidyr.tidyverse.org/articles/tidy-data.html">Learn more about tidy data.</a></p>
<p>This chapter explains how you can improve names and codes so that <code>eye</code> will work like a charm.</p>
</div>
<div id="how-do-i-rename-columns-in-r" class="section level3">
<h3>How do I rename columns in R?</h3>
<p>When I started with R, I found it challenging to rename columns and I found the following methods very helpful:</p>
<p>I’ve got a data frame with unfortunate names:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">name_mess &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">name =</span> <span class="st">&quot;a&quot;</span>, <span class="dt">oculus =</span> <span class="st">&quot;r&quot;</span>, <span class="dt">eyepressure =</span> <span class="dv">14</span>, <span class="dt">vision =</span> <span class="fl">0.2</span>)</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="kw">names</span>(name_mess)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="co">#&gt; [1] &quot;name&quot;        &quot;oculus&quot;      &quot;eyepressure&quot; &quot;vision&quot;</span></a></code></pre></div>
<p>I can rename all names easily:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw">names</span>(name_mess) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;patID&quot;</span>, <span class="st">&quot;eye&quot;</span>, <span class="st">&quot;IOP&quot;</span>, <span class="st">&quot;VA&quot;</span>)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="kw">names</span>(name_mess)</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="co">#&gt; [1] &quot;patID&quot; &quot;eye&quot;   &quot;IOP&quot;   &quot;VA&quot;</span></a></code></pre></div>
<p>To rename only specific columns, even if you are not sure about their exact position:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="co">## if you only want to rename one or a few columns: </span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="kw">names</span>(name_mess)[<span class="kw">names</span>(name_mess) <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;name&quot;</span>, <span class="st">&quot;vision&quot;</span>)] &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;patID&quot;</span>, <span class="st">&quot;VA&quot;</span>)</a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="kw">names</span>(name_mess)</a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="co">#&gt; [1] &quot;patID&quot;       &quot;oculus&quot;      &quot;eyepressure&quot; &quot;VA&quot;</span></a></code></pre></div>
<p>For even more methods, I found those two threads on Stackoverflow very helpful:</p>
<ul>
<li><a href="https://stackoverflow.com/q/7531868/7941188">Rename single column</a></li>
<li><a href="https://stackoverflow.com/q/20987295/7941188">Rename columns with named vector</a></li>
</ul>
</div>
<div id="tips-and-rules-for-naming" class="section level3">
<h3>Tips and rules for naming:</h3>
<ol style="list-style-type: decimal">
<li>Don’t be too creative with your names!</li>
<li>Use common coding:
<ul>
<li><strong>eyes</strong>: “r”, “re”, “od”, “right” - or numeric coding r:l = 0:1 or 1:2</li>
<li><strong>Visual acuity</strong>: “VA”, “BCVA”, “Acuity”</li>
<li><strong>Intraocular pressure</strong>: “IOP”, “GAT”, “NCT”, “pressure”</li>
<li><strong>Patient identifier</strong>: “pat”, “patient”, “ID” (ideally both: “patientID” or “patID”)</li>
</ul></li>
<li>Column names:
<ul>
<li>No spaces!</li>
<li>Do not use numeric coding for eyes in column names</li>
<li>Separate eye and VA and IOP codes with underscores (“bcva_l_preop”, “VA_r”, “left_va”, “IOP_re”)</li>
<li>Keep names short</li>
<li>Don’t use underscores when you don’t need to: Consider each section divided by an underscore as a relevant characteristic of your variable. E.g., “preop” instead of “pre_op”, or simply “VA” instead of “VA_ETDRS_Letters”</li>
</ul></li>
</ol>
</div>
<div id="name-examples" class="section level3">
<h3>Name examples</h3>
<p>Good names (<code>eye</code> will work nicely)</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="co">## right and left eyes have common codes</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="co">## information on the tested dimension is included (&quot;iop&quot;)</span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="co">## VA and eye strings are separated by underscores</span></a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="co">## No unnecessary underscores.</span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="kw">names</span>(wide_df)</a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="co">#&gt;  [1] &quot;id&quot;            &quot;surgery_right&quot; &quot;surgery_left&quot;  &quot;iop_r_preop&quot;  </span></a>
<a class="sourceLine" id="cb11-7" data-line-number="7"><span class="co">#&gt;  [5] &quot;iop_r_postop&quot;  &quot;iop_l_preop&quot;   &quot;iop_l_postop&quot;  &quot;va_r_preop&quot;   </span></a>
<a class="sourceLine" id="cb11-8" data-line-number="8"><span class="co">#&gt;  [9] &quot;va_r_postop&quot;   &quot;va_l_preop&quot;    &quot;va_l_postop&quot;</span></a>
<a class="sourceLine" id="cb11-9" data-line-number="9"></a>
<a class="sourceLine" id="cb11-10" data-line-number="10"><span class="kw">names</span>(iop_wide) </a>
<a class="sourceLine" id="cb11-11" data-line-number="11"><span class="co">#&gt; [1] &quot;id&quot;    &quot;iop_r&quot; &quot;iop_l&quot;</span></a></code></pre></div>
<p>OK names (<code>eye</code> will work)</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="co">## Id and Eye are common names, there are no spaces</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="co">## VA is separated from the rest with an underscore</span></a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="co">## BUT: </span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="co">## The names are quite long </span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="co">## There is an unnecessary underscore (etdrs are always letters). Better just &quot;VA&quot;</span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="kw">names</span>(amd) </a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="co">#&gt; [1] &quot;Id&quot;               &quot;Eye&quot;              &quot;FollowupDays&quot;     &quot;BaselineAge&quot;     </span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8"><span class="co">#&gt; [5] &quot;Gender&quot;           &quot;VA_ETDRS_Letters&quot; &quot;InjectionNumber&quot;</span></a>
<a class="sourceLine" id="cb12-9" data-line-number="9"></a>
<a class="sourceLine" id="cb12-10" data-line-number="10"><span class="co">## All names are commonly used (good!)</span></a>
<a class="sourceLine" id="cb12-11" data-line-number="11"><span class="co">## But which dimension of &quot;r&quot;/&quot;l&quot; are we exactly looking at? </span></a>
<a class="sourceLine" id="cb12-12" data-line-number="12"><span class="kw">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;r&quot;</span>,  <span class="st">&quot;l&quot;</span>)</a>
<a class="sourceLine" id="cb12-13" data-line-number="13"><span class="co">#&gt; [1] &quot;id&quot; &quot;r&quot;  &quot;l&quot;</span></a></code></pre></div>
<p>Bad names (<code>eye</code> will fail)</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="co">## VA/IOP not separated with underscore</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="co">## `eye` won't be able to recognize IOP and VA columns</span></a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="kw">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;iopr&quot;</span>, <span class="st">&quot;iopl&quot;</span>, <span class="st">&quot;VAr&quot;</span>, <span class="st">&quot;VAl&quot;</span>)</a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="co">#&gt; [1] &quot;id&quot;   &quot;iopr&quot; &quot;iopl&quot; &quot;VAr&quot;  &quot;VAl&quot;</span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"></a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="co">## A human may think this is clear</span></a>
<a class="sourceLine" id="cb13-7" data-line-number="7"><span class="co">## But `eye` will fail to understand those variable names</span></a>
<a class="sourceLine" id="cb13-8" data-line-number="8"><span class="kw">c</span>(<span class="st">&quot;person&quot;</span>, <span class="st">&quot;goldmann&quot;</span>, <span class="st">&quot;vision&quot;</span>)</a>
<a class="sourceLine" id="cb13-9" data-line-number="9"><span class="co">#&gt; [1] &quot;person&quot;   &quot;goldmann&quot; &quot;vision&quot;</span></a>
<a class="sourceLine" id="cb13-10" data-line-number="10"></a>
<a class="sourceLine" id="cb13-11" data-line-number="11"><span class="co">## Not even clear to humans</span></a>
<a class="sourceLine" id="cb13-12" data-line-number="12"><span class="kw">c</span>(<span class="st">&quot;var1&quot;</span>, <span class="st">&quot;var2&quot;</span>, <span class="st">&quot;var3&quot;</span>)</a>
<a class="sourceLine" id="cb13-13" data-line-number="13"><span class="co">#&gt; [1] &quot;var1&quot; &quot;var2&quot; &quot;var3&quot;</span></a></code></pre></div>
</div>
</div>
<div id="reveal" class="section level2">
<h2>Reveal common statistics</h2>
<p><code>reveal()</code> offers a simple API to show common summary statistics for all numeric columns of your data frame. <code>reveal()</code> is basically a slightly complicated wrapper around <code>mean()</code>, <code>sd()</code>, <code>length()</code>, <code>min()</code> and <code>max()</code> (with na.rm = TRUE and <code>length()</code> counting only non-NA values).</p>
<p>It is not really intended to replace other awesome data exploration packages / functions such as <code>skimr::skim</code>, and it will likely remain focussed on summarizing numerical data only.</p>
<p>It uses an S3 generic under the hood with methods for atomic vectors, data frames, and lists of either atomic vectors or data frames. Character vectors will be omitted (and it should give a warning that it has done so).</p>
<p><code>reveal()</code> takes the grouping argument <code>by</code> and it returns vector for atomic vectors or a data frame for lists.</p>
<div id="examples-3" class="section level3">
<h3>Examples</h3>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">clean_df &lt;-<span class="st"> </span><span class="kw">myop</span>(wide_df)</a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="kw">reveal</span>(clean_df)</a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="co">#&gt;          var mean  sd n min max</span></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="co">#&gt; 1  iop_preop 27.5 5.5 8  21  34</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5"><span class="co">#&gt; 2 iop_postop 12.5 1.2 8  11  14</span></a>
<a class="sourceLine" id="cb14-6" data-line-number="6"><span class="co">#&gt; 3   va_preop 42.5 1.2 8  41  44</span></a>
<a class="sourceLine" id="cb14-7" data-line-number="7"><span class="co">#&gt; 4  va_postop 46.5 1.2 8  45  48</span></a>
<a class="sourceLine" id="cb14-8" data-line-number="8"></a>
<a class="sourceLine" id="cb14-9" data-line-number="9"><span class="kw">reveal</span>(clean_df, <span class="dt">by =</span> <span class="st">&quot;eye&quot;</span>)</a>
<a class="sourceLine" id="cb14-10" data-line-number="10"><span class="co">#&gt;   eye        var mean  sd n min max</span></a>
<a class="sourceLine" id="cb14-11" data-line-number="11"><span class="co">#&gt; 1   l  iop_preop 32.5 1.3 4  31  34</span></a>
<a class="sourceLine" id="cb14-12" data-line-number="12"><span class="co">#&gt; 2   l iop_postop 12.5 1.3 4  11  14</span></a>
<a class="sourceLine" id="cb14-13" data-line-number="13"><span class="co">#&gt; 3   l   va_preop 42.5 1.3 4  41  44</span></a>
<a class="sourceLine" id="cb14-14" data-line-number="14"><span class="co">#&gt; 4   l  va_postop 46.5 1.3 4  45  48</span></a>
<a class="sourceLine" id="cb14-15" data-line-number="15"><span class="co">#&gt; 5   r  iop_preop 22.5 1.3 4  21  24</span></a>
<a class="sourceLine" id="cb14-16" data-line-number="16"><span class="co">#&gt; 6   r iop_postop 12.5 1.3 4  11  14</span></a>
<a class="sourceLine" id="cb14-17" data-line-number="17"><span class="co">#&gt; 7   r   va_preop 42.5 1.3 4  41  44</span></a>
<a class="sourceLine" id="cb14-18" data-line-number="18"><span class="co">#&gt; 8   r  va_postop 46.5 1.3 4  45  48</span></a>
<a class="sourceLine" id="cb14-19" data-line-number="19"></a>
<a class="sourceLine" id="cb14-20" data-line-number="20"><span class="kw">reveal</span>(clean_df, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;eye&quot;</span>, <span class="st">&quot;surgery&quot;</span>))</a>
<a class="sourceLine" id="cb14-21" data-line-number="21"><span class="co">#&gt;    eye surgery        var mean  sd n min max</span></a>
<a class="sourceLine" id="cb14-22" data-line-number="22"><span class="co">#&gt; 1    l     SLT  iop_preop 34.0  NA 1  34  34</span></a>
<a class="sourceLine" id="cb14-23" data-line-number="23"><span class="co">#&gt; 2    l     SLT iop_postop 14.0  NA 1  14  14</span></a>
<a class="sourceLine" id="cb14-24" data-line-number="24"><span class="co">#&gt; 3    l     SLT   va_preop 44.0  NA 1  44  44</span></a>
<a class="sourceLine" id="cb14-25" data-line-number="25"><span class="co">#&gt; 4    l     SLT  va_postop 48.0  NA 1  48  48</span></a>
<a class="sourceLine" id="cb14-26" data-line-number="26"><span class="co">#&gt; 5    r     SLT  iop_preop 23.5 0.7 2  23  24</span></a>
<a class="sourceLine" id="cb14-27" data-line-number="27"><span class="co">#&gt; 6    r     SLT iop_postop 13.5 0.7 2  13  14</span></a>
<a class="sourceLine" id="cb14-28" data-line-number="28"><span class="co">#&gt; 7    r     SLT   va_preop 43.5 0.7 2  43  44</span></a>
<a class="sourceLine" id="cb14-29" data-line-number="29"><span class="co">#&gt; 8    r     SLT  va_postop 47.5 0.7 2  47  48</span></a>
<a class="sourceLine" id="cb14-30" data-line-number="30"><span class="co">#&gt; 9    l      TE  iop_preop 32.0 1.0 3  31  33</span></a>
<a class="sourceLine" id="cb14-31" data-line-number="31"><span class="co">#&gt; 10   l      TE iop_postop 12.0 1.0 3  11  13</span></a>
<a class="sourceLine" id="cb14-32" data-line-number="32"><span class="co">#&gt; 11   l      TE   va_preop 42.0 1.0 3  41  43</span></a>
<a class="sourceLine" id="cb14-33" data-line-number="33"><span class="co">#&gt; 12   l      TE  va_postop 46.0 1.0 3  45  47</span></a>
<a class="sourceLine" id="cb14-34" data-line-number="34"><span class="co">#&gt; 13   r      TE  iop_preop 21.5 0.7 2  21  22</span></a>
<a class="sourceLine" id="cb14-35" data-line-number="35"><span class="co">#&gt; 14   r      TE iop_postop 11.5 0.7 2  11  12</span></a>
<a class="sourceLine" id="cb14-36" data-line-number="36"><span class="co">#&gt; 15   r      TE   va_preop 41.5 0.7 2  41  42</span></a>
<a class="sourceLine" id="cb14-37" data-line-number="37"><span class="co">#&gt; 16   r      TE  va_postop 45.5 0.7 2  45  46</span></a></code></pre></div>
</div>
</div>
<div id="age" class="section level2">
<h2>Calculate age</h2>
<p>This is a simple function and should not require much explanation. However, it may be noteworthy to mention the subtle distinction of periods and durations, which are an idiosyncrasy of time measurements and well explained <a href="https://lubridate.tidyverse.org/articles/lubridate.html#time-intervals">in this thread.</a></p>
<div id="examples-4" class="section level3">
<h3>Examples</h3>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">dob &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;1984-10-16&quot;</span>, <span class="st">&quot;2000-01-01&quot;</span>)</a>
<a class="sourceLine" id="cb15-2" data-line-number="2"></a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="co">## If no second date given, the age today</span></a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="kw">age</span>(dob)</a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="co">#&gt; [1] 35.7 20.5</span></a>
<a class="sourceLine" id="cb15-6" data-line-number="6"></a>
<a class="sourceLine" id="cb15-7" data-line-number="7"><span class="co">## If the second argument is specified, the age until then</span></a>
<a class="sourceLine" id="cb15-8" data-line-number="8"><span class="kw">age</span>(dob, <span class="st">&quot;2000-01-01&quot;</span>)                                                    </a>
<a class="sourceLine" id="cb15-9" data-line-number="9"><span class="co">#&gt; [1] 15.2  0.0</span></a></code></pre></div>
</div>
</div>
<div id="important-notes" class="section level2">
<h2>Important notes</h2>
<p><strong>I do not assume responsability for your data or analysis</strong>. Please always keep a critical mind when working with data - if you do get results that seem implausible, there may be a chance that the data is in an unfortunate shape for which <code>eye</code> may not be suitable.</p>
<div id="va-conversion-chart" class="section level3">
<h3>VA conversion chart</h3>
<p>This chart is included in the package as <code>va_chart</code></p>
<div style="font-size:8 pt;">
<table>
<thead>
<tr class="header">
<th>Snellen feet</th>
<th>Snellen meter</th>
<th>Snellen decimal</th>
<th>logMAR</th>
<th>ETDRS</th>
<th>Categories</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>20/20000</td>
<td>6/6000</td>
<td>0.001</td>
<td>3</td>
<td>0</td>
<td>NLP</td>
</tr>
<tr class="even">
<td>20/10000</td>
<td>6/3000</td>
<td>0.002</td>
<td>2.7</td>
<td>0</td>
<td>LP</td>
</tr>
<tr class="odd">
<td>20/4000</td>
<td>6/1200</td>
<td>0.005</td>
<td>2.3</td>
<td>0</td>
<td>HM</td>
</tr>
<tr class="even">
<td>20/2000</td>
<td>6/600</td>
<td>0.01</td>
<td>1.9</td>
<td>2</td>
<td>CF</td>
</tr>
<tr class="odd">
<td>20/800</td>
<td>6/240</td>
<td>0.025</td>
<td>1.6</td>
<td>5</td>
<td>NA</td>
</tr>
<tr class="even">
<td>20/630</td>
<td>6/190</td>
<td>0.032</td>
<td>1.5</td>
<td>10</td>
<td>NA</td>
</tr>
<tr class="odd">
<td>20/500</td>
<td>6/150</td>
<td>0.04</td>
<td>1.4</td>
<td>15</td>
<td>NA</td>
</tr>
<tr class="even">
<td>20/400</td>
<td>6/120</td>
<td>0.05</td>
<td>1.3</td>
<td>20</td>
<td>NA</td>
</tr>
<tr class="odd">
<td>20/320</td>
<td>6/96</td>
<td>0.062</td>
<td>1.2</td>
<td>25</td>
<td>NA</td>
</tr>
<tr class="even">
<td>20/300</td>
<td>6/90</td>
<td>0.067</td>
<td>1.18</td>
<td>26</td>
<td>NA</td>
</tr>
<tr class="odd">
<td>20/250</td>
<td>6/75</td>
<td>0.08</td>
<td>1.1</td>
<td>30</td>
<td>NA</td>
</tr>
<tr class="even">
<td>20/200</td>
<td>6/60</td>
<td>0.1</td>
<td>1.0</td>
<td>35</td>
<td>NA</td>
</tr>
<tr class="odd">
<td>20/160</td>
<td>6/48</td>
<td>0.125</td>
<td>0.9</td>
<td>40</td>
<td>NA</td>
</tr>
<tr class="even">
<td>20/125</td>
<td>6/38</td>
<td>0.16</td>
<td>0.8</td>
<td>45</td>
<td>NA</td>
</tr>
<tr class="odd">
<td>20/120</td>
<td>6/36</td>
<td>0.167</td>
<td>0.78</td>
<td>46</td>
<td>NA</td>
</tr>
<tr class="even">
<td>20/100</td>
<td>6/30</td>
<td>0.2</td>
<td>0.7</td>
<td>50</td>
<td>NA</td>
</tr>
<tr class="odd">
<td>20/80</td>
<td>6/24</td>
<td>0.25</td>
<td>0.6</td>
<td>55</td>
<td>NA</td>
</tr>
<tr class="even">
<td>20/70</td>
<td>6/21</td>
<td>0.29</td>
<td>0.54</td>
<td>58</td>
<td>NA</td>
</tr>
<tr class="odd">
<td>20/63</td>
<td>6/19</td>
<td>0.32</td>
<td>0.5</td>
<td>60</td>
<td>NA</td>
</tr>
<tr class="even">
<td>20/60</td>
<td>6/18</td>
<td>0.33</td>
<td>0.48</td>
<td>61</td>
<td>NA</td>
</tr>
<tr class="odd">
<td>20/50</td>
<td>6/15</td>
<td>0.4</td>
<td>0.4</td>
<td>65</td>
<td>NA</td>
</tr>
<tr class="even">
<td>20/40</td>
<td>6/12</td>
<td>0.5</td>
<td>0.3</td>
<td>70</td>
<td>NA</td>
</tr>
<tr class="odd">
<td>20/32</td>
<td>6/9.6</td>
<td>0.625</td>
<td>0.2</td>
<td>75</td>
<td>NA</td>
</tr>
<tr class="even">
<td>20/30</td>
<td>6/9</td>
<td>0.66</td>
<td>0.18</td>
<td>76</td>
<td>NA</td>
</tr>
<tr class="odd">
<td>20/25</td>
<td>6/7.5</td>
<td>0.8</td>
<td>0.1</td>
<td>80</td>
<td>NA</td>
</tr>
<tr class="even">
<td>20/20</td>
<td>6/6</td>
<td>1.0</td>
<td>0.0</td>
<td>85</td>
<td>NA</td>
</tr>
<tr class="odd">
<td>20/16</td>
<td>6/5</td>
<td>1.25</td>
<td>-0.1</td>
<td>90</td>
<td>NA</td>
</tr>
<tr class="even">
<td>20/15</td>
<td>6/4.5</td>
<td>1.33</td>
<td>-0.12</td>
<td>91</td>
<td>NA</td>
</tr>
<tr class="odd">
<td>20/13</td>
<td>6/4</td>
<td>1.5</td>
<td>-0.2</td>
<td>95</td>
<td>NA</td>
</tr>
<tr class="even">
<td>20/10</td>
<td>6/3</td>
<td>2.0</td>
<td>-0.3</td>
<td>100</td>
<td>NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="acknowledgements" class="section level2">
<h2>Acknowledgements</h2>
<ul>
<li>Thanks to <strong>Alasdair Warwick</strong>, <strong>Aaron Lee</strong>, <strong>Tim Yap</strong>, <strong>Siegfried Wagner</strong> and <strong>Abraham Olvera</strong> for great suggestions, testing and code review.</li>
<li>Thanks to Hadley Wickham and all developers of the <code>tidyverse</code> packages and the packages <code>roxygen2</code>, <code>usethis</code>, <code>testthis</code> and <code>devtools</code>, all on which <code>eye</code> heavily relies.</li>
</ul>
</div>
<div id="resources" class="section level2">
<h2>Resources</h2>
<ul>
<li><a href="https://michaelbach.de/sci/acuity.html">Michael Bach’s homepage</a></li>
<li><a href="https://michaelbach.de/sci/pubs/Bach2007IOVS%20eLetter%20FrACT.pdf">Michael Bach on NLP and LP</a></li>
</ul>
</div>
<div id="references" class="section level2">
<h2>References</h2>
<p>Beck, Roy W, Pamela S Moke, Andrew H Turpin, Frederick L Ferris, John Paul SanGiovanni, Chris A Johnson, Eileen E Birch, et al. 2003. “A Computerized Method of Visual Acuity Testing.” American Journal of Ophthalmology 135 (2). Elsevier BV: 194–205. <a href="https://doi.org/10.1016/s0002-9394(02)01825-1" class="uri">https://doi.org/10.1016/s0002-9394(02)01825-1</a>.</p>
<p>Fasler, Katrin, Gabriella Moraes, Siegfried Wagner, Karsten U Kortuem, Reena Chopra, Livia Faes, Gabriella Preston, et al. 2019. “One- and Two-Year Visual Outcomes from the Moorfields Age-Related Macular Degeneration Database: A Retrospective Cohort Study and an Open Science Resource.” BMJ Open 9 (6). British Medical Journal Publishing Group. <a href="https://doi.org/10.1136/bmjopen-2018-027441" class="uri">https://doi.org/10.1136/bmjopen-2018-027441</a>.</p>
<p>Gregori, Ninel Z, William Feuer, and Philip J Rosenfeld. 2010. “Novel Method for Analyzing Snellen Visual Acuity Measurements.” Retina 30 (7). Ovid Technologies (Wolters Kluwer Health): 1046–50. <a href="https://doi.org/10.1097/iae.0b013e3181d87e04" class="uri">https://doi.org/10.1097/iae.0b013e3181d87e04</a>.</p>
<p>Holladay, Jack T. 2004. “Visual Acuity Measurements.” Journal of Cataract and Refractive Surgery 30 (2): 287–90. <a href="https://doi.org/10.1016/j.jcrs.2004.01.014" class="uri">https://doi.org/10.1016/j.jcrs.2004.01.014</a>.</p>
<p>Schulze-Bonsel, Kilian, Nicolas Feltgen, Hermann Burau, Lutz Hansen, and Michael Bach. 2006. “Visual Acuities ‘Hand Motion’ and ‘Counting Fingers’ Can Be Quantified with the Freiburg Visual Acuity Test.” Investigative Ophthalmology &amp; Visual Science 47 (3): 1236–40. <a href="https://doi.org/10.1167/iovs.05-0981" class="uri">https://doi.org/10.1167/iovs.05-0981</a>.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
